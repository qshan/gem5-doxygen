<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>gem5: PerfKvmCounter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">gem5
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classPerfKvmCounter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">PerfKvmCounter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>An instance of a performance counter.  
 <a href="classPerfKvmCounter.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a04109dddf971bc3fa633cb02924a91e6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a04109dddf971bc3fa633cb02924a91e6">PerfKvmCounter</a> (<a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;config, pid_t tid)</td></tr>
<tr class="memdesc:a04109dddf971bc3fa633cb02924a91e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create and attach a new counter group.  <a href="#a04109dddf971bc3fa633cb02924a91e6">More...</a><br /></td></tr>
<tr class="separator:a04109dddf971bc3fa633cb02924a91e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18c7ee654c949ebe2d589ce136c0ca0a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a18c7ee654c949ebe2d589ce136c0ca0a">PerfKvmCounter</a> (<a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;config, pid_t tid, const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;parent)</td></tr>
<tr class="memdesc:a18c7ee654c949ebe2d589ce136c0ca0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create and attach a new counter and make it a member of an exist counter group.  <a href="#a18c7ee654c949ebe2d589ce136c0ca0a">More...</a><br /></td></tr>
<tr class="separator:a18c7ee654c949ebe2d589ce136c0ca0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03dd01e5af63e5444b6cecc2c56f408e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a03dd01e5af63e5444b6cecc2c56f408e">PerfKvmCounter</a> ()</td></tr>
<tr class="memdesc:a03dd01e5af63e5444b6cecc2c56f408e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new counter, but don't attach it.  <a href="#a03dd01e5af63e5444b6cecc2c56f408e">More...</a><br /></td></tr>
<tr class="separator:a03dd01e5af63e5444b6cecc2c56f408e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c5564a77873981c1d4b0dfc324531d4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a6c5564a77873981c1d4b0dfc324531d4">~PerfKvmCounter</a> ()</td></tr>
<tr class="separator:a6c5564a77873981c1d4b0dfc324531d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52fe78af261cef0d29cb7e3ef353edd4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a52fe78af261cef0d29cb7e3ef353edd4">attach</a> (<a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;config, pid_t tid)</td></tr>
<tr class="memdesc:a52fe78af261cef0d29cb7e3ef353edd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attach a counter.  <a href="#a52fe78af261cef0d29cb7e3ef353edd4">More...</a><br /></td></tr>
<tr class="separator:a52fe78af261cef0d29cb7e3ef353edd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a4373d79577238a74a33e9fc7347881"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a2a4373d79577238a74a33e9fc7347881">attach</a> (<a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;config, pid_t tid, const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;parent)</td></tr>
<tr class="memdesc:a2a4373d79577238a74a33e9fc7347881"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attach a counter and make it a member of an existing counter group.  <a href="#a2a4373d79577238a74a33e9fc7347881">More...</a><br /></td></tr>
<tr class="separator:a2a4373d79577238a74a33e9fc7347881"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a513fe1fda49f4c7815d9bbf2130dc8f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a513fe1fda49f4c7815d9bbf2130dc8f8">detach</a> ()</td></tr>
<tr class="memdesc:a513fe1fda49f4c7815d9bbf2130dc8f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detach a counter from PerfEvent.  <a href="#a513fe1fda49f4c7815d9bbf2130dc8f8">More...</a><br /></td></tr>
<tr class="separator:a513fe1fda49f4c7815d9bbf2130dc8f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2407621061ef78960517de79369b454c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a2407621061ef78960517de79369b454c">attached</a> () const</td></tr>
<tr class="memdesc:a2407621061ef78960517de79369b454c"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classCheck.html">Check</a> if a counter is attached.  <a href="#a2407621061ef78960517de79369b454c">More...</a><br /></td></tr>
<tr class="separator:a2407621061ef78960517de79369b454c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aa773f86248318c3601d36461ec9d4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a5aa773f86248318c3601d36461ec9d4f">start</a> ()</td></tr>
<tr class="memdesc:a5aa773f86248318c3601d36461ec9d4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start counting.  <a href="#a5aa773f86248318c3601d36461ec9d4f">More...</a><br /></td></tr>
<tr class="separator:a5aa773f86248318c3601d36461ec9d4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad30a0be4ca2dd2101f4e1ea5b34f690d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#ad30a0be4ca2dd2101f4e1ea5b34f690d">stop</a> ()</td></tr>
<tr class="memdesc:ad30a0be4ca2dd2101f4e1ea5b34f690d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop counting.  <a href="#ad30a0be4ca2dd2101f4e1ea5b34f690d">More...</a><br /></td></tr>
<tr class="separator:ad30a0be4ca2dd2101f4e1ea5b34f690d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a783736987df878785e0e9de13f1b996b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a783736987df878785e0e9de13f1b996b">period</a> (uint64_t period)</td></tr>
<tr class="memdesc:a783736987df878785e0e9de13f1b996b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the period of an overflow counter.  <a href="#a783736987df878785e0e9de13f1b996b">More...</a><br /></td></tr>
<tr class="separator:a783736987df878785e0e9de13f1b996b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfe20429cd56f4f1b89ce9521ea95ffe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#acfe20429cd56f4f1b89ce9521ea95ffe">refresh</a> (int refresh)</td></tr>
<tr class="memdesc:acfe20429cd56f4f1b89ce9521ea95ffe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable a counter for a fixed number of events.  <a href="#acfe20429cd56f4f1b89ce9521ea95ffe">More...</a><br /></td></tr>
<tr class="separator:acfe20429cd56f4f1b89ce9521ea95ffe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad3fb604567a10560f96aef3bd21fb85"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#aad3fb604567a10560f96aef3bd21fb85">read</a> () const</td></tr>
<tr class="memdesc:aad3fb604567a10560f96aef3bd21fb85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the current value of a counter.  <a href="#aad3fb604567a10560f96aef3bd21fb85">More...</a><br /></td></tr>
<tr class="separator:aad3fb604567a10560f96aef3bd21fb85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0529f82e3cd912a079a75a5aab276108"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a0529f82e3cd912a079a75a5aab276108">enableSignals</a> (pid_t tid, int signal)</td></tr>
<tr class="memdesc:a0529f82e3cd912a079a75a5aab276108"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable signal delivery to a thread on counter overflow.  <a href="#a0529f82e3cd912a079a75a5aab276108">More...</a><br /></td></tr>
<tr class="separator:a0529f82e3cd912a079a75a5aab276108"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dd24f8eb474924c47917e9065a74d95"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a8dd24f8eb474924c47917e9065a74d95">enableSignals</a> (int signal)</td></tr>
<tr class="memdesc:a8dd24f8eb474924c47917e9065a74d95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable signal delivery on counter overflow.  <a href="#a8dd24f8eb474924c47917e9065a74d95">More...</a><br /></td></tr>
<tr class="separator:a8dd24f8eb474924c47917e9065a74d95"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a0212182e8c619f861e52bc763a392b62"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a0212182e8c619f861e52bc763a392b62">PerfKvmCounter</a> (const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;that)</td></tr>
<tr class="separator:a0212182e8c619f861e52bc763a392b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3c927ebd508723e362740ef7d2806f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#ae3c927ebd508723e362740ef7d2806f2">operator=</a> (const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;that)</td></tr>
<tr class="separator:ae3c927ebd508723e362740ef7d2806f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e6238ea143ec192819eeb8f35f48a17"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a8e6238ea143ec192819eeb8f35f48a17">attach</a> (<a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;config, pid_t tid, int group_fd)</td></tr>
<tr class="separator:a8e6238ea143ec192819eeb8f35f48a17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a775dd8be4376456f5f1868644951e6dd"><td class="memItemLeft" align="right" valign="top">pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a775dd8be4376456f5f1868644951e6dd">sysGettid</a> ()</td></tr>
<tr class="memdesc:a775dd8be4376456f5f1868644951e6dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the TID of the current thread.  <a href="#a775dd8be4376456f5f1868644951e6dd">More...</a><br /></td></tr>
<tr class="separator:a775dd8be4376456f5f1868644951e6dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3ca32cc29f00874bc1435e80696ce78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#af3ca32cc29f00874bc1435e80696ce78">mmapPerf</a> (int pages)</td></tr>
<tr class="memdesc:af3ca32cc29f00874bc1435e80696ce78"><td class="mdescLeft">&#160;</td><td class="mdescRight">MMAP the PerfEvent file descriptor.  <a href="#af3ca32cc29f00874bc1435e80696ce78">More...</a><br /></td></tr>
<tr class="separator:af3ca32cc29f00874bc1435e80696ce78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85e454db88feadb98c9002801fff76a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a85e454db88feadb98c9002801fff76a4">read</a> (void *buf, size_t size) const</td></tr>
<tr class="memdesc:a85e454db88feadb98c9002801fff76a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a read from the counter file descriptor.  <a href="#a85e454db88feadb98c9002801fff76a4">More...</a><br /></td></tr>
<tr class="separator:a85e454db88feadb98c9002801fff76a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a887f5f41866fe13e24cbf7d070ecfbf1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a887f5f41866fe13e24cbf7d070ecfbf1">fcntl</a> (int cmd, long p1)</td></tr>
<tr class="memdesc:a887f5f41866fe13e24cbf7d070ecfbf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">PerfEvent fnctl interface.  <a href="#a887f5f41866fe13e24cbf7d070ecfbf1">More...</a><br /></td></tr>
<tr class="separator:a887f5f41866fe13e24cbf7d070ecfbf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43aa44b229ef3fbce6bcada50819bd45"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a43aa44b229ef3fbce6bcada50819bd45">fcntl</a> (int cmd, void *p1)</td></tr>
<tr class="separator:a43aa44b229ef3fbce6bcada50819bd45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a837c62ac761daa787efd7d49e4494950"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a837c62ac761daa787efd7d49e4494950">ioctl</a> (int request, long p1)</td></tr>
<tr class="memdesc:a837c62ac761daa787efd7d49e4494950"><td class="mdescLeft">&#160;</td><td class="mdescRight">PerfEvent ioctl interface.  <a href="#a837c62ac761daa787efd7d49e4494950">More...</a><br /></td></tr>
<tr class="separator:a837c62ac761daa787efd7d49e4494950"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4563abacd69ff022ead49bf273054de"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#ae4563abacd69ff022ead49bf273054de">ioctl</a> (int request, void *p1)</td></tr>
<tr class="separator:ae4563abacd69ff022ead49bf273054de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e9aa8be71af4c27274f1fb8bf87c99b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a5e9aa8be71af4c27274f1fb8bf87c99b">ioctl</a> (int request)</td></tr>
<tr class="separator:a5e9aa8be71af4c27274f1fb8bf87c99b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3f7639f73056627b89a919e8863fb8c7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a3f7639f73056627b89a919e8863fb8c7">fd</a></td></tr>
<tr class="memdesc:a3f7639f73056627b89a919e8863fb8c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">PerfEvent file descriptor associated with counter.  <a href="#a3f7639f73056627b89a919e8863fb8c7">More...</a><br /></td></tr>
<tr class="separator:a3f7639f73056627b89a919e8863fb8c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc55f1dd2af13081e5134a6b7433d07d"><td class="memItemLeft" align="right" valign="top">struct perf_event_mmap_page *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#adc55f1dd2af13081e5134a6b7433d07d">ringBuffer</a></td></tr>
<tr class="memdesc:adc55f1dd2af13081e5134a6b7433d07d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory mapped PerfEvent sample ring buffer.  <a href="#adc55f1dd2af13081e5134a6b7433d07d">More...</a><br /></td></tr>
<tr class="separator:adc55f1dd2af13081e5134a6b7433d07d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd4a7b534367937baa78a2ab8131872e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#acd4a7b534367937baa78a2ab8131872e">ringNumPages</a></td></tr>
<tr class="memdesc:acd4a7b534367937baa78a2ab8131872e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total number of pages in ring buffer.  <a href="#acd4a7b534367937baa78a2ab8131872e">More...</a><br /></td></tr>
<tr class="separator:acd4a7b534367937baa78a2ab8131872e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a642d20e957841e0ba683b0a2fa99237a"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a642d20e957841e0ba683b0a2fa99237a">pageSize</a></td></tr>
<tr class="memdesc:a642d20e957841e0ba683b0a2fa99237a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cached host page size.  <a href="#a642d20e957841e0ba683b0a2fa99237a">More...</a><br /></td></tr>
<tr class="separator:a642d20e957841e0ba683b0a2fa99237a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An instance of a performance counter. </p>

<p class="definition">Definition at line <a class="el" href="perfevent_8hh_source.html#l00170">170</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a04109dddf971bc3fa633cb02924a91e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04109dddf971bc3fa633cb02924a91e6">&#9670;&nbsp;</a></span>PerfKvmCounter() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PerfKvmCounter::PerfKvmCounter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create and attach a new counter group. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>Counter configuration </td></tr>
    <tr><td class="paramname">tid</td><td>Thread to sample (0 indicates current thread) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00070">70</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8hh_source.html#l00206">attach()</a>.</p>

</div>
</div>
<a id="a18c7ee654c949ebe2d589ce136c0ca0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18c7ee654c949ebe2d589ce136c0ca0a">&#9670;&nbsp;</a></span>PerfKvmCounter() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PerfKvmCounter::PerfKvmCounter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;&#160;</td>
          <td class="paramname"><em>parent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create and attach a new counter and make it a member of an exist counter group. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>Counter configuration </td></tr>
    <tr><td class="paramname">tid</td><td>Thread to sample (0 indicates current thread) </td></tr>
    <tr><td class="paramname">parent</td><td>Group leader </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00076">76</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8hh_source.html#l00206">attach()</a>.</p>

</div>
</div>
<a id="a03dd01e5af63e5444b6cecc2c56f408e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03dd01e5af63e5444b6cecc2c56f408e">&#9670;&nbsp;</a></span>PerfKvmCounter() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PerfKvmCounter::PerfKvmCounter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new counter, but don't attach it. </p>

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00083">83</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

</div>
</div>
<a id="a6c5564a77873981c1d4b0dfc324531d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c5564a77873981c1d4b0dfc324531d4">&#9670;&nbsp;</a></span>~PerfKvmCounter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PerfKvmCounter::~PerfKvmCounter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00088">88</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8hh_source.html#l00230">attached()</a>, and <a class="el" href="perfevent_8cc_source.html#l00095">detach()</a>.</p>

</div>
</div>
<a id="a0212182e8c619f861e52bc763a392b62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0212182e8c619f861e52bc763a392b62">&#9670;&nbsp;</a></span>PerfKvmCounter() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PerfKvmCounter::PerfKvmCounter </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;&#160;</td>
          <td class="paramname"><em>that</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a52fe78af261cef0d29cb7e3ef353edd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52fe78af261cef0d29cb7e3ef353edd4">&#9670;&nbsp;</a></span>attach() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::attach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attach a counter. </p>
<dl class="section note"><dt>Note</dt><dd>This operation is only supported if the counter isn't already attached.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>Counter configuration </td></tr>
    <tr><td class="paramname">tid</td><td>Thread to sample (0 indicates current thread) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="perfevent_8hh_source.html#l00206">206</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p class="reference">Referenced by <a class="el" href="perfevent_8cc_source.html#l00070">PerfKvmCounter()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01286">BaseKvmCPU::setupCounters()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01361">BaseKvmCPU::setupInstCounter()</a>.</p>

</div>
</div>
<a id="a2a4373d79577238a74a33e9fc7347881"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a4373d79577238a74a33e9fc7347881">&#9670;&nbsp;</a></span>attach() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::attach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;&#160;</td>
          <td class="paramname"><em>parent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attach a counter and make it a member of an existing counter group. </p>
<dl class="section note"><dt>Note</dt><dd>This operation is only supported if the counter isn't already attached.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>Counter configuration </td></tr>
    <tr><td class="paramname">tid</td><td>Thread to sample (0 indicates current thread) </td></tr>
    <tr><td class="paramname">parent</td><td>Group leader </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="perfevent_8hh_source.html#l00221">221</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8hh_source.html#l00372">fd</a>.</p>

</div>
</div>
<a id="a8e6238ea143ec192819eeb8f35f48a17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e6238ea143ec192819eeb8f35f48a17">&#9670;&nbsp;</a></span>attach() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::attach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>group_fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00161">161</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8hh_source.html#l00230">attached()</a>, <a class="el" href="perfevent_8hh_source.html#l00164">PerfKvmCounterConfig::attr</a>, <a class="el" href="perfevent_8hh_source.html#l00372">fd</a>, <a class="el" href="perfevent_8cc_source.html#l00195">mmapPerf()</a>, and <a class="el" href="logging_8hh_source.html#l00167">panic</a>.</p>

</div>
</div>
<a id="a2407621061ef78960517de79369b454c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2407621061ef78960517de79369b454c">&#9670;&nbsp;</a></span>attached()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool PerfKvmCounter::attached </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classCheck.html">Check</a> if a counter is attached. </p>

<p class="definition">Definition at line <a class="el" href="perfevent_8hh_source.html#l00230">230</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p class="reference">References <a class="el" href="arch_2arm_2types_8hh_source.html#l00160">ArmISA::fd</a>, and <a class="el" href="cprintftime_8cc_source.html#l00040">stop</a>.</p>

<p class="reference">Referenced by <a class="el" href="perfevent_8cc_source.html#l00161">attach()</a>, <a class="el" href="perfevent_8cc_source.html#l00095">detach()</a>, <a class="el" href="perfevent_8cc_source.html#l00218">fcntl()</a>, <a class="el" href="perfevent_8cc_source.html#l00225">ioctl()</a>, <a class="el" href="perfevent_8cc_source.html#l00195">mmapPerf()</a>, <a class="el" href="perfevent_8cc_source.html#l00232">read()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01361">BaseKvmCPU::setupInstCounter()</a>, and <a class="el" href="perfevent_8cc_source.html#l00088">~PerfKvmCounter()</a>.</p>

</div>
</div>
<a id="a513fe1fda49f4c7815d9bbf2130dc8f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a513fe1fda49f4c7815d9bbf2130dc8f8">&#9670;&nbsp;</a></span>detach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::detach </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detach a counter from PerfEvent. </p>

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00095">95</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8hh_source.html#l00230">attached()</a>, <a class="el" href="perfevent_8hh_source.html#l00372">fd</a>, <a class="el" href="perfevent_8hh_source.html#l00380">pageSize</a>, <a class="el" href="perfevent_8hh_source.html#l00375">ringBuffer</a>, <a class="el" href="perfevent_8hh_source.html#l00377">ringNumPages</a>, and <a class="el" href="logging_8hh_source.html#l00212">warn</a>.</p>

<p class="reference">Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00447">BaseKvmCPU::notifyFork()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01361">BaseKvmCPU::setupInstCounter()</a>, and <a class="el" href="perfevent_8cc_source.html#l00088">~PerfKvmCounter()</a>.</p>

</div>
</div>
<a id="a0529f82e3cd912a079a75a5aab276108"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0529f82e3cd912a079a75a5aab276108">&#9670;&nbsp;</a></span>enableSignals() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::enableSignals </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable signal delivery to a thread on counter overflow. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Thread to deliver signal to </td></tr>
    <tr><td class="paramname">signal</td><td>Signal to send upon overflow </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00146">146</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8cc_source.html#l00218">fcntl()</a>, and <a class="el" href="logging_8hh_source.html#l00167">panic</a>.</p>

<p class="reference">Referenced by <a class="el" href="timer_8cc_source.html#l00161">PerfKvmTimer::PerfKvmTimer()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01361">BaseKvmCPU::setupInstCounter()</a>.</p>

</div>
</div>
<a id="a8dd24f8eb474924c47917e9065a74d95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dd24f8eb474924c47917e9065a74d95">&#9670;&nbsp;</a></span>enableSignals() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::enableSignals </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enable signal delivery on counter overflow. </p>
<p>Identical to enableSignals(pid_t) when called with the current TID as its parameter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">signal</td><td>Signal to send upon overflow </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="perfevent_8hh_source.html#l00300">300</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8hh_source.html#l00300">enableSignals()</a>, and <a class="el" href="timer_8cc_source.html#l00064">sysGettid()</a>.</p>

<p class="reference">Referenced by <a class="el" href="perfevent_8hh_source.html#l00300">enableSignals()</a>.</p>

</div>
</div>
<a id="a887f5f41866fe13e24cbf7d070ecfbf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a887f5f41866fe13e24cbf7d070ecfbf1">&#9670;&nbsp;</a></span>fcntl() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int PerfKvmCounter::fcntl </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>p1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>PerfEvent fnctl interface. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>fcntl command </td></tr>
    <tr><td class="paramname">p1</td><td><a class="el" href="classRequest.html">Request</a> parameter</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error (error number in errno), ioctl dependent value otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00218">218</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8hh_source.html#l00230">attached()</a>, and <a class="el" href="perfevent_8hh_source.html#l00372">fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="perfevent_8cc_source.html#l00146">enableSignals()</a>.</p>

</div>
</div>
<a id="a43aa44b229ef3fbce6bcada50819bd45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43aa44b229ef3fbce6bcada50819bd45">&#9670;&nbsp;</a></span>fcntl() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int PerfKvmCounter::fcntl </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="perfevent_8hh_source.html#l00342">342</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8hh_source.html#l00342">fcntl()</a>.</p>

<p class="reference">Referenced by <a class="el" href="perfevent_8hh_source.html#l00342">fcntl()</a>.</p>

</div>
</div>
<a id="a837c62ac761daa787efd7d49e4494950"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a837c62ac761daa787efd7d49e4494950">&#9670;&nbsp;</a></span>ioctl() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int PerfKvmCounter::ioctl </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>p1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>PerfEvent ioctl interface. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>PerfEvent request </td></tr>
    <tr><td class="paramname">p1</td><td>Optional request parameter</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error (error number in errno), ioctl dependent value otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00225">225</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8hh_source.html#l00230">attached()</a>, and <a class="el" href="perfevent_8hh_source.html#l00372">fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="perfevent_8cc_source.html#l00123">period()</a>, <a class="el" href="perfevent_8cc_source.html#l00130">refresh()</a>, <a class="el" href="perfevent_8cc_source.html#l00109">start()</a>, and <a class="el" href="perfevent_8cc_source.html#l00116">stop()</a>.</p>

</div>
</div>
<a id="ae4563abacd69ff022ead49bf273054de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4563abacd69ff022ead49bf273054de">&#9670;&nbsp;</a></span>ioctl() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int PerfKvmCounter::ioctl </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="perfevent_8hh_source.html#l00356">356</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8hh_source.html#l00356">ioctl()</a>.</p>

<p class="reference">Referenced by <a class="el" href="perfevent_8hh_source.html#l00356">ioctl()</a>.</p>

</div>
</div>
<a id="a5e9aa8be71af4c27274f1fb8bf87c99b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e9aa8be71af4c27274f1fb8bf87c99b">&#9670;&nbsp;</a></span>ioctl() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int PerfKvmCounter::ioctl </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="perfevent_8hh_source.html#l00357">357</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8hh_source.html#l00357">ioctl()</a>, and <a class="el" href="int_8hh_source.html#l00059">X86ISA::L</a>.</p>

<p class="reference">Referenced by <a class="el" href="perfevent_8hh_source.html#l00357">ioctl()</a>.</p>

</div>
</div>
<a id="af3ca32cc29f00874bc1435e80696ce78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3ca32cc29f00874bc1435e80696ce78">&#9670;&nbsp;</a></span>mmapPerf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::mmapPerf </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pages</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>MMAP the PerfEvent file descriptor. </p>
<dl class="section note"><dt>Note</dt><dd>We currently don't use the ring buffer, but PerfEvent requires this to be mapped for overflow handling to work.</dd>
<dd>
Overflow handling requires at least one buf_page to be mapped.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pages</td><td>number of pages in circular sample buffer. Must be an even power of 2. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00195">195</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8hh_source.html#l00230">attached()</a>, <a class="el" href="perfevent_8hh_source.html#l00372">fd</a>, <a class="el" href="perfevent_8hh_source.html#l00380">pageSize</a>, <a class="el" href="logging_8hh_source.html#l00167">panic</a>, <a class="el" href="perfevent_8hh_source.html#l00375">ringBuffer</a>, and <a class="el" href="perfevent_8hh_source.html#l00377">ringNumPages</a>.</p>

<p class="reference">Referenced by <a class="el" href="perfevent_8cc_source.html#l00161">attach()</a>.</p>

</div>
</div>
<a id="ae3c927ebd508723e362740ef7d2806f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3c927ebd508723e362740ef7d2806f2">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a>&amp; PerfKvmCounter::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;&#160;</td>
          <td class="paramname"><em>that</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a783736987df878785e0e9de13f1b996b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a783736987df878785e0e9de13f1b996b">&#9670;&nbsp;</a></span>period()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::period </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>period</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the period of an overflow counter. </p>
<dl class="section warning"><dt>Warning</dt><dd>This ioctl has some pretty bizarre semantics. It seems like the new period isn't effective until after the next counter overflow. If you use this method to change the sample period, you will see one sample with the old period and then start sampling with the new period. This problem was fixed for ARM in version 3.7 of the kernel.</dd>
<dd>
This method doesn't work at all on some 2.6.3x kernels since it has inverted check for the return value when copying parameters from userspace.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">period</td><td>Overflow period in events </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00123">123</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8cc_source.html#l00225">ioctl()</a>, and <a class="el" href="logging_8hh_source.html#l00167">panic</a>.</p>

<p class="reference">Referenced by <a class="el" href="timer_8cc_source.html#l00174">PerfKvmTimer::arm()</a>.</p>

</div>
</div>
<a id="aad3fb604567a10560f96aef3bd21fb85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad3fb604567a10560f96aef3bd21fb85">&#9670;&nbsp;</a></span>read() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t PerfKvmCounter::read </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the current value of a counter. </p>

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00137">137</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00722">BaseKvmCPU::getHostCycles()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00728">BaseKvmCPU::kvmRun()</a>, and <a class="el" href="perfevent_8cc_source.html#l00232">read()</a>.</p>

</div>
</div>
<a id="a85e454db88feadb98c9002801fff76a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85e454db88feadb98c9002801fff76a4">&#9670;&nbsp;</a></span>read() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::read </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Perform a read from the counter file descriptor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Destination buffer </td></tr>
    <tr><td class="paramname">size</td><td>Amount of data to read </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00232">232</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8hh_source.html#l00230">attached()</a>, <a class="el" href="perfevent_8hh_source.html#l00372">fd</a>, <a class="el" href="logging_8hh_source.html#l00167">panic</a>, and <a class="el" href="perfevent_8cc_source.html#l00137">read()</a>.</p>

</div>
</div>
<a id="acfe20429cd56f4f1b89ce9521ea95ffe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfe20429cd56f4f1b89ce9521ea95ffe">&#9670;&nbsp;</a></span>refresh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::refresh </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>refresh</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable a counter for a fixed number of events. </p>
<p>When this method is called, perf event enables the counter if it was disabled. It then leaves the counter enabled until it has overflowed a refresh times.</p>
<dl class="section note"><dt>Note</dt><dd>This does not update the period of the counter.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">refresh</td><td>Number of overflows before disabling the counter. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00130">130</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8cc_source.html#l00225">ioctl()</a>, and <a class="el" href="logging_8hh_source.html#l00167">panic</a>.</p>

<p class="reference">Referenced by <a class="el" href="timer_8cc_source.html#l00174">PerfKvmTimer::arm()</a>.</p>

</div>
</div>
<a id="a5aa773f86248318c3601d36461ec9d4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aa773f86248318c3601d36461ec9d4f">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start counting. </p>
<dl class="section note"><dt>Note</dt><dd>If this counter is a group leader, it will start the entire group. </dd></dl>

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00109">109</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8cc_source.html#l00225">ioctl()</a>, and <a class="el" href="logging_8hh_source.html#l00167">panic</a>.</p>

<p class="reference">Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00728">BaseKvmCPU::kvmRun()</a>.</p>

</div>
</div>
<a id="ad30a0be4ca2dd2101f4e1ea5b34f690d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad30a0be4ca2dd2101f4e1ea5b34f690d">&#9670;&nbsp;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop counting. </p>
<dl class="section note"><dt>Note</dt><dd>If this counter is a group leader, it will stop the entire group. </dd></dl>

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00116">116</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p class="reference">References <a class="el" href="perfevent_8cc_source.html#l00225">ioctl()</a>, and <a class="el" href="logging_8hh_source.html#l00167">panic</a>.</p>

<p class="reference">Referenced by <a class="el" href="timer_8cc_source.html#l00181">PerfKvmTimer::disarm()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00728">BaseKvmCPU::kvmRun()</a>.</p>

</div>
</div>
<a id="a775dd8be4376456f5f1868644951e6dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a775dd8be4376456f5f1868644951e6dd">&#9670;&nbsp;</a></span>sysGettid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pid_t PerfKvmCounter::sysGettid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the TID of the current thread. </p>
<dl class="section return"><dt>Returns</dt><dd>Current thread's TID </dd></dl>

<p class="definition">Definition at line <a class="el" href="perfevent_8cc_source.html#l00189">189</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a3f7639f73056627b89a919e8863fb8c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f7639f73056627b89a919e8863fb8c7">&#9670;&nbsp;</a></span>fd</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int PerfKvmCounter::fd</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>PerfEvent file descriptor associated with counter. </p>
<p>-1 if not attached to PerfEvent. </p>

<p class="definition">Definition at line <a class="el" href="perfevent_8hh_source.html#l00372">372</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p class="reference">Referenced by <a class="el" href="perfevent_8cc_source.html#l00161">attach()</a>, <a class="el" href="perfevent_8cc_source.html#l00095">detach()</a>, <a class="el" href="perfevent_8cc_source.html#l00218">fcntl()</a>, <a class="el" href="perfevent_8cc_source.html#l00225">ioctl()</a>, <a class="el" href="perfevent_8cc_source.html#l00195">mmapPerf()</a>, and <a class="el" href="perfevent_8cc_source.html#l00232">read()</a>.</p>

</div>
</div>
<a id="a642d20e957841e0ba683b0a2fa99237a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a642d20e957841e0ba683b0a2fa99237a">&#9670;&nbsp;</a></span>pageSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long PerfKvmCounter::pageSize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cached host page size. </p>

<p class="definition">Definition at line <a class="el" href="perfevent_8hh_source.html#l00380">380</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p class="reference">Referenced by <a class="el" href="perfevent_8cc_source.html#l00095">detach()</a>, and <a class="el" href="perfevent_8cc_source.html#l00195">mmapPerf()</a>.</p>

</div>
</div>
<a id="adc55f1dd2af13081e5134a6b7433d07d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc55f1dd2af13081e5134a6b7433d07d">&#9670;&nbsp;</a></span>ringBuffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct perf_event_mmap_page* PerfKvmCounter::ringBuffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Memory mapped PerfEvent sample ring buffer. </p>

<p class="definition">Definition at line <a class="el" href="perfevent_8hh_source.html#l00375">375</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p class="reference">Referenced by <a class="el" href="perfevent_8cc_source.html#l00095">detach()</a>, and <a class="el" href="perfevent_8cc_source.html#l00195">mmapPerf()</a>.</p>

</div>
</div>
<a id="acd4a7b534367937baa78a2ab8131872e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd4a7b534367937baa78a2ab8131872e">&#9670;&nbsp;</a></span>ringNumPages</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int PerfKvmCounter::ringNumPages</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Total number of pages in ring buffer. </p>

<p class="definition">Definition at line <a class="el" href="perfevent_8hh_source.html#l00377">377</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p class="reference">Referenced by <a class="el" href="perfevent_8cc_source.html#l00095">detach()</a>, and <a class="el" href="perfevent_8cc_source.html#l00195">mmapPerf()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>cpu/kvm/<a class="el" href="perfevent_8hh_source.html">perfevent.hh</a></li>
<li>cpu/kvm/<a class="el" href="perfevent_8cc_source.html">perfevent.cc</a></li>
</ul>
</div><!-- contents -->
<hr size="1"><address style="align: right;"><small>
Generated on Mon Nov 25 2019 12:52:19 for gem5 by <a href="http://www.doxygen.org/index.html"> doxygen</a> 1.8.13</small></address>
</body>
</html>
